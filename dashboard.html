<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Business Dashboard</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="style.css"> <!-- We will create this file later -->
     <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
      :root { --primary-color: #4f46e5; --secondary-color: #10b981; --background-color: #f3f4f6; --card-background: #ffffff; --text-color: #111827; --subtext-color: #6b7280; --sidebar-bg: #1f2937; --sidebar-text: #d1d5db; --sidebar-active-bg: #374151; --sidebar-active-border: #4f46e5; --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
      * { box-sizing: border-box; margin: 0; padding: 0; }
      html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
      body { font-family: 'Inter', sans-serif; background-color: var(--background-color); color: var(--text-color); }
      .container { display: flex; min-height: 100vh; }
      .sidebar { width: 260px; background-color: var(--sidebar-bg); color: var(--sidebar-text); display: flex; flex-direction: column; transition: width 0.3s ease, transform 0.3s ease; flex-shrink: 0; z-index: 200; }
      .sidebar-header { padding: 24px; text-align: center; border-bottom: 1px solid #374151; }
      .sidebar-header h3 { font-weight: 600; font-size: 1.25rem; letter-spacing: 0.5px; }
      .nav-links { list-style: none; margin-top: 16px; flex-grow: 1; }
      .nav-links li a { display: flex; align-items: center; padding: 14px 24px; color: var(--sidebar-text); text-decoration: none; transition: background-color 0.2s, color 0.2s; font-weight: 500; border-left: 4px solid transparent; }
      .nav-links li a .material-icons-outlined { margin-right: 16px; font-size: 22px; }
      .nav-links li a:hover { background-color: var(--sidebar-active-bg); color: #ffffff; }
      .nav-links li.active a { background-color: var(--sidebar-active-bg); color: #ffffff; border-left-color: var(--sidebar-active-border); }
      .sidebar-footer { padding: 20px; text-align: center; font-size: 0.8rem; color: #9ca3af; border-top: 1px solid #374151; }
      .main-content { flex-grow: 1; padding: 32px; overflow-y: auto; }
      .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
      .main-header h1 { font-size: 2rem; font-weight: 700; text-transform: capitalize; }
      #last-updated { font-size: 0.875rem; color: var(--subtext-color); }
      #last-updated .material-icons-outlined { font-size: 1rem; vertical-align: text-bottom; margin-right: 4px; }
      .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
      .grid-container-large { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; }
      .card { background-color: var(--card-background); border-radius: 12px; padding: 24px; box-shadow: var(--shadow); transition: transform 0.2s, box-shadow 0.2s; border: 1px solid #e5e7eb; }
      .card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
      .card-title { display: flex; align-items: center; }
      .card-title .material-icons-outlined { font-size: 24px; color: var(--primary-color); margin-right: 12px; background-color: #e0e7ff; padding: 8px; border-radius: 50%; }
      .card-title h3 { font-size: 1rem; font-weight: 600; color: var(--subtext-color); }
      .card-value { font-size: 2.25rem; font-weight: 700; color: var(--text-color); }
      .card-subtext { font-size: 0.875rem; color: var(--subtext-color); margin-top: 8px; }
      .styled-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.875rem; }
      .styled-table thead tr { background-color: #f9fafb; }
      .styled-table th { padding: 12px 16px; text-align: left; font-weight: 600; color: var(--subtext-color); text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; }
      .styled-table td { padding: 12px 16px; border-bottom: 1px solid #e5e7eb; vertical-align: middle; }
      .styled-table tfoot th { padding: 12px 16px; text-align: left; font-weight: 700; color: var(--text-color); border-top: 2px solid #e5e7eb; }
      .styled-table .clickable-row:hover { background-color: #f9fafb; cursor: pointer; }
      .employee-cell { display: flex; align-items: center; }
      .employee-photo-wrapper { position: relative; width: 36px; height: 36px; flex-shrink: 0; margin-right: 12px; }
      .employee-photo { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
      .status-dot { position: absolute; bottom: 0; right: 0; width: 10px; height: 10px; border-radius: 50%; border: 2px solid #fff; }
      .status-dot-present, .status-dot-halfday { background-color: #22c55e; }
      .status-dot-absent { background-color: #ef4444; }
      .status-dot-leave { background-color: #3b82f6; }
      .perf-card { cursor: pointer; display: flex; flex-direction: column; }
      .perf-header { display: flex; align-items: center; margin-bottom: 16px; }
      .perf-header h4 { font-size: 1.125rem; font-weight: 600; }
      .perf-work-breakdown { margin-top: auto; font-size: 0.875rem; color: var(--subtext-color); }
      .perf-work-breakdown span { display: inline-block; margin-right: 12px; }
      .perf-work-breakdown b { color: var(--text-color); }
      .total-files { margin-left: auto; text-align: right; }
      .total-files .value { font-size: 1.5rem; font-weight: 600; }
      .total-files .label { font-size: 0.75rem; color: var(--subtext-color); }
      .filter-bar { margin-bottom: 24px; display: flex; align-items: center; gap: 16px; flex-wrap: wrap; background-color: var(--card-background); padding: 16px; border-radius: 12px; box-shadow: var(--shadow); }
      .filter-bar label { font-weight: 500; }
      .filter-bar select, .filter-bar .multi-select { padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc; font-family: 'Inter', sans-serif; background-color: #fff; }
      .chart-container { position: relative; height: 300px; width: 100%; }
      .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; display: none; justify-content: center; align-items: center; }
      .modal-content { background: #fff; padding: 32px; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; display: flex; flex-direction: column; }
      .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
      .modal-header h2 { font-size: 1.5rem; }
      .modal-close { font-size: 2rem; font-weight: bold; cursor: pointer; color: #aaa; background: none; border: none; }
      .modal-body { overflow-y: auto; }
      .modal-filters { display: flex; gap: 16px; margin-bottom: 16px; align-items: center; flex-wrap: wrap; }
      .modal-filters label { font-weight: 500; }
      .modal-filters input[type="date"], .modal-filters select { padding: 8px; border-radius: 6px; border: 1px solid #ccc; font-family: 'Inter', sans-serif; }
      .dept-card { background-color: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; }
      .dept-card h4 { margin-bottom: 12px; font-weight: 600; font-size: 1rem; }
      .employee-list { list-style: none; }
      .employee-list li { display: flex; align-items: center; padding: 10px 0; border-top: 1px solid #e5e7eb; }
      .employee-list li:first-child { border-top: none; }
      .employee-name { font-weight: 500; }
      .employee-status { margin-left: auto; padding: 4px 10px; border-radius: 999px; font-size: 0.75rem; font-weight: 600; text-transform: capitalize; }
      .status-present { background-color: #dcfce7; color: #166534; }
      .status-absent { background-color: #fee2e2; color: #991b1b; }
      .status-leave { background-color: #dbeafe; color: #1e40af; }
      .status-halfday { background-color: #fef3c7; color: #92400e; }
      .advanced-filter-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px; }
      .filter-group { display: flex; flex-direction: column; }
      .filter-group label { font-weight: 500; margin-bottom: 8px; }
      .filter-group select { width: 100%; }
      .filter-group .checkbox-group { display: flex; flex-direction: column; gap: 8px; }
      .filter-buttons { grid-column: 1 / -1; display: flex; gap: 16px; justify-content: flex-end; }
      .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 500; transition: background-color 0.2s; }
      .btn-primary { background-color: var(--primary-color); color: #fff; }
      .btn-primary:hover { background-color: #4338ca; }
      .btn-secondary { background-color: #e5e7eb; color: var(--text-color); }
      .btn-secondary:hover { background-color: #d1d5db; }
      .btn-export { background-color: #059669; color: white; }
      .btn-export:hover { background-color: #047857; }
      .table-header-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
      .table-header-controls h3 { margin: 0; }
      #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.8); z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.3s ease, visibility 0.3s ease; }
      #preloader.hidden { opacity: 0; visibility: hidden; }
      .spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      .menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
      .menu-toggle .material-icons-outlined { font-size: 28px; color: var(--text-color); }
      .skeleton { opacity: .7; animation: skeleton-loading 1s linear infinite alternate; }
      .skeleton-card { background-color: #e5e7eb; border-radius: 12px; height: 138px; width: 100%; }
      @keyframes skeleton-loading { 0% { background-color: hsl(210, 20%, 85%); } 100% { background-color: hsl(210, 20%, 95%); } }
      .marketing-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; align-items: flex-start; }
      #map-container { position: relative; height: 550px; border-radius: 12px; overflow: hidden; }
      #map { height: 100%; width: 100%; }
      .map-loader { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255,255,255,0.7); display: none; justify-content: center; align-items: center; z-index: 401; }
      .leaflet-popup-content { font-family: 'Inter', sans-serif; }
      .leaflet-popup-content b { display: block; margin-bottom: 4px; font-size: 1rem; }
      .marketing-sidebar { display: flex; flex-direction: column; gap: 24px; }
      .table-container { max-height: 400px; overflow-y: auto; }
      @media (max-width: 1024px) { .marketing-grid { grid-template-columns: 1fr; } }
      @media (max-width: 768px) { .sidebar { position: fixed; transform: translateX(-260px); height: 100%; } .sidebar.open { transform: translateX(0); box-shadow: 0 0 20px rgba(0,0,0,0.2); } .main-content { padding: 16px; } .main-header h1 { font-size: 1.5rem; } .menu-toggle { display: block; } .main-header { gap: 16px; } .grid-container, .grid-container-large { grid-template-columns: 1fr; } .filter-bar, .modal-filters, .filter-buttons { flex-direction: column; align-items: stretch; } .modal-content { width: 95%; padding: 16px; } .table-container { overflow-x: auto; } .styled-table { min-width: 600px; } .card-value { font-size: 1.75rem; } .accounts-grid { grid-template-columns: 1fr !important; } }
    </style>
  </head>
  <body>
    <div id="preloader"><div class="spinner"></div></div>

    <div class="container">
      <nav class="sidebar" id="sidebar">
        <div>
          <div class="sidebar-header"><h3>MyCorp</h3></div>
          <ul class="nav-links">
            <li><a href="dashboard.html?page=Backoffice"><i class="material-icons-outlined">workspaces</i> Backoffice</a></li>
            <li><a href="dashboard.html?page=Marketing"><i class="material-icons-outlined">campaign</i> Marketing</a></li>
            <li><a href="dashboard.html?page=Engineers"><i class="material-icons-outlined">engineering</i> Engineers</a></li>
            <li><a href="dashboard.html?page=Accounts"><i class="material-icons-outlined">account_balance_wallet</i> Accounts</a></li>
            <li><a href="dashboard.html?page=HR"><i class="material-icons-outlined">groups</i> HR</a></li>
          </ul>
        </div>
        <div class="sidebar-footer">
          <ul class="nav-links" style="margin-top:0; flex-grow: 0;">
             <li><a href="#" id="logout-btn"><i class="material-icons-outlined">logout</i> Logout</a></li>
          </ul>
          Dashboard v9.0
        </div>
      </nav>

      <main class="main-content">
        <header class="main-header">
          <button class="menu-toggle" id="menu-toggle"><i class="material-icons-outlined">menu</i></button>
          <h1 id="page-title">Dashboard</h1>
          <div id="last-updated" style="display: none;"><i class="material-icons-outlined">sync</i><span></span></div>
        </header>
        
        <!-- This div will be populated by script.js based on the page -->
        <div id="page-content">
            <!-- SKELETON LOADER OR CONTENT WILL BE INJECTED HERE -->
        </div>
        
      </main>
    </div>

    <script src="script.js"></script>
  </body>
</html>
